# Copyright (c) 2022 Qualcomm Technologies, Inc.
# 3rd party file marking retained below for attribution purposes:
# SPDX-License-Identifier: (BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/.../qcom,i2c-controller.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: file for i2c device config

maintainers:
  - PoC <bnigam@qti.qualcomm.com>

description: |
  The Qualcomm compatible node...
  Links to any data sheet or HW specific details

# A dictionary of DT properties for this binding schema
properties:
  compatible: 
    const: qcom,i2c-controller

  reg:
    maxItems: 1
  
  "#address-cells":
    const: 1

  "#size-cells":
    const: 0

patternProperties:
  "^i2c_device_config_[0-9]+@[0-9a-f]+$":
    type: object
    description: child devices
      
    properties:
      reg:
        maxItems: 1

      core_base_addr:
        description: core_base_addr
        $ref: /schemas/types.yaml#/definitions/uint32
      
      common_base_addr:
        description: common_base_addr
        $ref: /schemas/types.yaml#/definitions/uint32
      
      core_offset:
        description: core_offset
        $ref: /schemas/types.yaml#/definitions/uint32
        
      qupv3_instance:
        description: qupv3_instance
        $ref: /schemas/types.yaml#/definitions/uint8
        
      core_index:
        description: core_index
        $ref: /schemas/types.yaml#/definitions/uint8
        
      se_index:
        description: se_index
        $ref: /schemas/types.yaml#/definitions/uint8
        
      gpi_index:
        description: gpi_index
        $ref: /schemas/types.yaml#/definitions/uint8
      
      core_irq:
        description: core_irq
        $ref: /schemas/types.yaml#/definitions/uint8
        
      polled_mode:
        description: polled_mode
        $ref: /schemas/types.yaml#/definitions/uint8
        
      i2c_hub:
        description: i2c_hub
        $ref: /schemas/types.yaml#/definitions/uint8
        
      i2c_mm:
        description: i2c_mm
        $ref: /schemas/types.yaml#/definitions/uint8
        
      min_data_length_for_dma:
        description: min_data_length_for_dma
        $ref: /schemas/types.yaml#/definitions/uint8
        
      scl_encoding:
        description: scl_encoding
        $ref: /schemas/types.yaml#/definitions/uint32
        
      sda_encoding:
        description: sda_encoding
        $ref: /schemas/types.yaml#/definitions/uint32
      
      tcsr_reg_offset:
        description: tcsr_reg_offset
        $ref: /schemas/types.yaml#/definitions/uint32
        
      tcsr_base_addr:
        description: tcsr_base_addr
        $ref: /schemas/types.yaml#/definitions/uint32
        
      tcsr_reg_value:
        description: tcsr_reg_value
        $ref: /schemas/types.yaml#/definitions/uint32
        
      se_clock:
        description: se_clock
        $ref: /schemas/types.yaml#/definitions/string
    
    required:
      - reg
      - core_base_addr
      - common_base_addr
      - core_offset
      - qupv3_instance
      - core_index
      - se_index
      - gpi_index
      - core_irq
      - polled_mode
      - i2c_hub
      - min_data_length_for_dma
      - scl_encoding
      - sda_encoding
      - tcsr_reg_offset
      - tcsr_base_addr
      - tcsr_reg_value
      - se_clock
    

required:
  - compatible

additionalProperties: false

examples:
  - |
    i2c:i2c@900000 {
        #address-cells = <1>;
        #size-cells = <0>;
        compatible = "qcom,i2c-controller";
        reg = <0x00900000 0x00100000>;

        i2c_device_config_1@90 {
            reg = <0x90>;
            core_base_addr              = <0x00900000>;
            common_base_addr            = <0x009C0000>;
            core_offset                 = <0x00080000>;
            qupv3_instance              = /bits/ 8 <0>;
            core_index                  = /bits/ 8 <1>;
            se_index                    = /bits/ 8 <0>;
            gpi_index                   = /bits/ 8 <0>;
            core_irq                    = /bits/ 8 <0>;
            polled_mode                 = /bits/ 8 <1>;
            i2c_hub                     = /bits/ 8 <1>;
            min_data_length_for_dma     = /bits/ 8 <0>;
            
            scl_encoding                = <0x30000>;
            sda_encoding                = <0x30000>;
            
            tcsr_reg_offset             = <0x00000000>;
            tcsr_base_addr              = <0x01FC0000>;
            tcsr_reg_value              = <0x00000000>;
            se_clock                    = "gcc_qupv3_i2c_s0_clk";
        };
      
    };

