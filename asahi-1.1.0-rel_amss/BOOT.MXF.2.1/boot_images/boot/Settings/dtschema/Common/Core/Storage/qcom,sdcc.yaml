# Copyright (c) 2022,2023 Qualcomm Technologies, Inc.
# 3rd party file marking retained below for attribution purposes:
# SPDX-License-Identifier: (BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/.../qcom,sdcc.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: file for sdcc storage

maintainers:
  - dt_pocs@qti.qualcomm.com

description: |
  The Qualcomm compatible node...
  Links to data required for functioning on eMMC and SD card driver

properties:
  compatible:
    const: qcom,sdcc

  "#address-cells":
    const: 1

  "#size-cells":
    const: 1

  reg:
    maxItems: 1

  EnableLogging:
    maxItems: 1
    description: Set 1 if you want to print extra log statements, change as needed.
    

  DriveStrength:
    maxItems: 1
    description: drive strengths as per IPCAT, change as needed.
    

  MaxSpeedMode:
    maxItems: 1
    description: Put the speed you want the device to RUN at, change as needed.

  pinctrl-names:
    description: List of GPIO Pin names

  pinctrl-0:
    description: Pin control active state configuration

  HsrSettings:
    type: object
    description: HsrSettings

    properties:
      DLLConfig:
        description: DLL settings to be obtained from VI
      
      DLLConfig3:
        description: DLL settings to be obtained from VI

      DLLTestCtrl:
        description: DLL settings to be obtained from VI
      
      DDRConfig:
        description: DLL settings to be obtained from VI
      
      DLLUserCtrl:
        description: DLL settings to be obtained from VI

    patternProperties:
      "HS[4^2]00 ^ SDR50 ^ SDR104":
        type: object

            
    required:
      - DLLConfig
      - DLLConfig2
      - DDRConfig
      - DLLConfig3
      - DLLTestCtrl
      - DLLUserCtrl  


required:
  - compatible
  - reg
  - EnableLogging
  - DriveStrength
  - MaxSpeedMode
  - HsrSettings

additionalProperties: false

examples:
  - |
    sdcc: sdc0@7C4000 {
      compatible = "qcom,sdcc";
      reg = <0x07C4000 0x00001000>;

      EnableLogging = /bits/ 8 <0>; 

      DriveStrength = <0x1EDB>; 
      MaxSpeedMode = /bits/ 8 <5>;

      HsrSettings {
        DLLConfig = <0xF442C>;
        DLLConfig3 = <0x01>;
        DLLTestCtrl = <0x1400000>;
        DDRConfig = <0x80040868>; 
        DLLUserCtrl = <0x090106C0>;
        DLLConfig2 = <0xA001>;

      };
    };
    
