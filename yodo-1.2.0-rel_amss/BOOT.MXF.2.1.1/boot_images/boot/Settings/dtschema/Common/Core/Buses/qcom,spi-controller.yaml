# Copyright (c) 2022 Qualcomm Technologies, Inc.
# 3rd party file marking retained below for attribution purposes:
# SPDX-License-Identifier: (BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/.../qcom,spi-controller.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: file for spi device config

maintainers:
  - PoC <bnigam@qti.qualcomm.com>

description: |
  The Qualcomm compatible node...
  Links to any data sheet or HW specific details

# A dictionary of DT properties for this binding schema
   
properties:
  compatible:
    const: qcom,spi-controller

  reg:
    maxItems: 1
  
  "#address-cells":
    const: 1

  "#size-cells":
    const: 0

patternProperties:
  "^spi_device_config_[0-9]+@[0-9a-f]+$":
    type: object
      
    properties:
      reg:
        maxItems: 1

      core_base_addr:
        description: core_base_addr
        $ref: /schemas/types.yaml#/definitions/uint32
        
      common_base_addr:
        description: common_base_addr
        $ref: /schemas/types.yaml#/definitions/uint32
      
      core_offset:
        description: core_offset
        $ref: /schemas/types.yaml#/definitions/uint32
        
      qupv3_instance:
        description: qupv3_instance
        $ref: /schemas/types.yaml#/definitions/uint8
        
      core_index:
        description: core_index
        $ref: /schemas/types.yaml#/definitions/uint8
        
      se_index:
        description: se_index
        $ref: /schemas/types.yaml#/definitions/uint8
        
      gpi_index:
        description: gpi_index
        $ref: /schemas/types.yaml#/definitions/uint8
      
      core_irq:
        description: core_irq
        $ref: /schemas/types.yaml#/definitions/uint8
        
      polled_mode:
        description: polled_mode
        $ref: /schemas/types.yaml#/definitions/uint8
        
      min_data_length_for_dma:
        description: min_data_length_for_dma
        $ref: /schemas/types.yaml#/definitions/uint8
        
      miso_encoding:
        description: miso_encoding
        $ref: /schemas/types.yaml#/definitions/uint32
        
      mosi_encoding:
        description: sda_encoding
        $ref: /schemas/types.yaml#/definitions/uint32
        
      clk_encoding:
        description: clk_encoding
        $ref: /schemas/types.yaml#/definitions/uint32
        
      cs_encoding:
        description: cs_encoding
        $ref: /schemas/types.yaml#/definitions/uint32
        
      sleep_miso_encoding:
        description: sleep_miso_encoding
        $ref: /schemas/types.yaml#/definitions/uint32
        
      sleep_mosi_encoding:
        description: sleep_sda_encoding
        $ref: /schemas/types.yaml#/definitions/uint32
        
      sleep_clk_encoding:
        description: sleep_clk_encoding
        $ref: /schemas/types.yaml#/definitions/uint32
        
      sleep_cs_encoding:
        description: sleep_cs_encoding
        $ref: /schemas/types.yaml#/definitions/uint32
        
      tcsr_reg_offset:
        description: tcsr_reg_offset
        $ref: /schemas/types.yaml#/definitions/uint32
        
      tcsr_base_addr:
        description: tcsr_base_addr
        $ref: /schemas/types.yaml#/definitions/uint32
        
      tcsr_reg_value:
        description: tcsr_reg_value
        $ref: /schemas/types.yaml#/definitions/uint32
        
      se_clock_frequency:
        description: se_clock_frequency
        $ref: /schemas/types.yaml#/definitions/uint32
        
      se_clock_dfs_index:
        description: se_clock_dfs_index
        $ref: /schemas/types.yaml#/definitions/uint32
        
      se_clock:
        description: se_clock
        $ref: /schemas/types.yaml#/definitions/string
        
    required:
      - reg
      - core_base_addr
      - common_base_addr
      - core_offset
      - qupv3_instance
      - core_index
      - se_index
      - gpi_index
      - core_irq
      - polled_mode
      - min_data_length_for_dma
      - miso_encoding
      - mosi_encoding
      - clk_encoding
      - cs_encoding
      - sleep_miso_encoding
      - sleep_mosi_encoding
      - sleep_clk_encoding
      - sleep_cs_encoding
      - tcsr_reg_offset
      - tcsr_base_addr
      - tcsr_reg_value
      - se_clock_frequency
      - se_clock_dfs_index
      - se_clock
  
required:
  - compatible

  
additionalProperties: false

examples:
  - |  
    spi:spi@A80000{
        #address-cells = <1>;
        #size-cells = <0>;
        compatible = "qcom,spi-controller";
        reg = <0x00A00000 0x00100000>;
        spi_device_config_1@90 {
            reg = <0x90>;

            core_base_addr              = <0x00900000>;
            common_base_addr            = <0x009C0000>;
            core_offset                 = <0x00080000>;
            qupv3_instance              = /bits/ 8 <1>;
            core_index                  = /bits/ 8 <0>;
            se_index                    = /bits/ 8 <0>;
            gpi_index                   = /bits/ 8 <0>;
            core_irq                    = /bits/ 8 <0>;
            polled_mode                 = /bits/ 8 <1>;
            min_data_length_for_dma     = /bits/ 8 <0>;
            
            miso_encoding                = <0x00900000>;
            mosi_encoding                = <0x00900000>;
            clk_encoding                 = <0x00900000>;
            cs_encoding                  = <0x00900000>;
            sleep_miso_encoding          = <0>;
            sleep_mosi_encoding          = <0>;
            sleep_clk_encoding           = <0>;
            sleep_cs_encoding            = <0>;
            
            tcsr_reg_offset             = <0x00000000>;
            tcsr_base_addr              = <0x01FC0000>;
            tcsr_reg_value              = <0x00000000>;

            se_clock_frequency          = <19200>;
            se_clock_dfs_index          = /bits/ 8 <1>;

            se_clock                    = "gcc_qupv3_wrap1_s0_clk";
        };
     
    };
